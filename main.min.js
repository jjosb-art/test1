(()=>{"use strict";var e,o={3152:(e,o,t)=>{t(2351),t(8339),t(9327),t(9886),t(4204),t(1346),t(6374),t(4711),t(2067),t(7873),t(5648),t(5937),t(5472),t(1021);var n=t(6753),i=t(1045);t(1144),t(6008),t(2888);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var o=function(e,o){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,o||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==a(o)?o:o+""}var l=function(){return e=function e(o){var t=this;!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e),this.moving=!1,this.secondAnimations=[],this.actions=[],this.meshes=[],o.gltfLoader.load(o.modelSrc1,(function(e){e.animations.forEach((function(e){e.name="move"})),e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.material.transparent=!0,e.material.opacity=1)})),t.modelMesh=e.scene,t.modelMesh.position.y=.3,t.modelMesh.scale.set(.005,.005,.005),t.modelMesh.name="ilbuni",o.scene.add(t.modelMesh),o.meshes.push(t.modelMesh),t.mixer=new n.Iw4(t.modelMesh),t.actions[0]=t.mixer.clipAction(e.animations[0]),t.meshes[0]=t.modelMesh}))},(o=[{key:"loadSecondGLB",value:function(e){var o=this;e.gltfLoader.load(e.modelSrc2,(function(t){t.animations.forEach((function(e){e.name="ear"})),t.scene.traverse((function(e){if(e.isMesh){var o=e.material.clone();o.transparent=!0,o.opacity=0,e.material=o}})),0!==t.animations.length&&(o.secondModelMesh=t.scene,o.secondModelMesh.position.y=.3,o.secondModelMesh.scale.set(.003,.003,.003),o.secondModelMesh.name="earGlb",e.scene.add(o.secondModelMesh),e.meshes.push(o.secondModelMesh),o.mixer=new n.Iw4(o.secondModelMesh),o.actions[0]=o.mixer.clipAction(glb.animations[0]),o.secondAnimations[0]=o.mixer.clipAction(t.animations[0]),o.secondAnimations[0].loop=n.G3T,o.meshes[1]=o.secondModelMesh)}))}},{key:"playWalk",value:function(){this.actions[0].play()}},{key:"playSecondAnimation",value:function(){this.meshes[0].traverse((function(e){e.isMesh&&(e.material.opacity=0)})),this.actions[0].stop(),this.meshes[1]&&this.meshes[1].traverse((function(e){e.isMesh&&(e.material.opacity=1)}))}},{key:"update",value:function(e){this.mixer&&this.mixer.update(e)}}])&&r(e.prototype,o),t&&r(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,o,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function u(e,o,t){return o&&d(e.prototype,o),t&&d(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var o=function(e,o){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,o||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==c(o)?o:o+""}var p=u((function e(o){var t=this;!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=o.x,this.y=o.y,this.z=o.z,this.actions=[],this.animationClip=[],o.gltfLoader.load(o.modelSrc,(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.material=o.elepondMaterial)})),t.modelMesh=e.scene.children[0],t.modelMesh.castShadow=!0,t.modelMesh.position.set(t.x,t.y,t.z),t.modelMesh.scale.set(.008,.008,.008),o.scene.add(t.modelMesh),t.mixer=new n.Iw4(t.modelMesh),t.actions[0]=t.mixer.clipAction(e.animations[0])}))})),m=t(1997),y=t(3227);function w(e,o){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,o){if(e){if("string"==typeof e)return f(e,o);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,o):void 0}}(e))||o&&e&&"number"==typeof e.length){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==t.return||t.return()}finally{if(s)throw a}}}}function f(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,n=Array(o);t<o;t++)n[t]=e[t];return n}var v=(new n.Tap).load("/images/ground.jpg");v.wrapS=n.GJx,v.wrapT=n.GJx,v.repeat.x=10,v.repeat.y=10,(new y.Y).load("/images/belfast_sunset_4k.hdr",(function(e){e.mapping=n.wfO,z.background=e,z.environment=e,z.backgroundIntensity=.1,z.environmentIntensity=.25}));var b=new n._4j({color:15132390,roughness:.4,metalness:.2,flatShading:!0}),M=new n._4j({color:7380082,roughness:.4,flatShading:!0}),g=new n._4j({color:14277081,roughness:.4,transparent:!0,opacity:.7,flatShading:!0}),x=document.querySelector("#three-canvas"),S=new n.JeP({canvas:x,antialias:!0});S.setSize(window.innerWidth,window.innerHeight),S.setPixelRatio(window.devicePixelRatio>1?2:1),S.setClearColor("#EDBC9B"),S.shadowMap.enabled=!0,S.shadowMap.type=n.Wk7;var z=new n.Z58,A=new n.qUd(-window.innerWidth/window.innerHeight,window.innerWidth/window.innerHeight,1,-1,-1e3,1e3),j=new n.Pq0(1,5,5);A.position.set(j.x,j.y,j.z),A.zoom=.2,A.updateProjectionMatrix(),z.add(A);var O=new n.$p8("orange",.7);z.add(O);var k=new n.ZyN("white",1),P=new n.Pq0(1,1,1);k.position.x=P.x,k.position.y=P.y,k.position.z=P.z,k.castShadow=!0,k.shadow.mapSize.width=2048,k.shadow.mapSize.height=2048,k.shadow.camera.left=-100,k.shadow.camera.right=100,k.shadow.camera.top=100,k.shadow.camera.bottom=-100,k.shadow.camera.near=-100,k.shadow.camera.far=100,z.add(k);var E=[],I=new n.eaF(new n.bdM(100,100),new n._4j({map:v}));I.name="floor",I.rotation.x=-Math.PI/2,I.receiveShadow=!0,z.add(I),E.push(I);var L=new n.eaF(new n.bdM(0,0),new n.V9B({}));L.rotation.x=-Math.PI/2,L.position.y=.01,L.receiveShadow=!0,z.add(L);var _=new n.eaF(new n.tcD(1,16),new n._4j({color:"skyblue",roughness:.1,transparent:!0,opacity:.6}));function q(){var e=new n.tcD(1,16),o=new n.V9B({color:"skyblue",roughness:.1,transparent:!0,opacity:.6}),t=new n.eaF(e,o);return t.position.set(20*(Math.random()-.5),.01,20*(Math.random()-.5)),t.rotation.x=-Math.PI/2,t.receiveShadow=!0,t}_.position.set(5,.005,5),_.rotation.x=-Math.PI/2,_.receiveShadow=!0,z.add(_);var B=[];var C,W,T,F,H,D,Y,G,J,N,X,R,U=new i.B,V=new p({gltfLoader:U,scene:z,modelSrc:"/models/lowpoly_ear.glb",elepondMaterial:b,x:5,y:-4.3,z:2}),Z=new l({scene:z,meshes:E,gltfLoader:U,modelSrc1:"/models/tex_move.glb",elepondMaterial:b});(new i.B).load("./models/tex_charge.glb",(function(e){if((W=e.scene).scale.set(0,0,0),z.add(W),W.traverse((function(e){})),C=new n.Iw4(W),e.animations&&e.animations.length>0){var o=e.animations[0];T=C.clipAction(o)}})),(new i.B).load("./models/hose1.glb",(function(e){if((F=e.scene).castShadow=!0,F.receiveShadow=!0,F.scale.set(0,0,0),z.add(F),D=new n.Iw4(F),e.animations&&e.animations.length>0){var o=e.animations[0];H=D.clipAction(o)}})),(new i.B).load("./models/hose2.glb",(function(e){(Y=e.scene).castShadow=!0,Y.receiveShadow=!0,Y.scale.set(0,0,0),z.add(Y)})),(new i.B).load("./models/lowpoly_grass.glb",(function(e){(G=e.scene).scale.set(1.3,1.3,1.3),G.castShadow=!0,G.receiveShadow=!0,G.scale.set(.008,.008,.008),G.position.set(0,-2,0),z.add(G),G.traverse((function(e){e.isMesh&&(e.material=M)}))})),(new i.B).load("./models/rain_2.glb",(function(e){if((J=e.scene).castShadow=!0,J.receiveShadow=!0,J.scale.set(.006,.006,.006),J.position.set(-5,.2,-2.6),z.add(J),J.traverse((function(e){e.isMesh&&(e.material=g)})),X=new n.Iw4(J),e.animations&&e.animations.length>0){var o=e.animations[0];(N=X.clipAction(o)).play()}[{x:3,y:.2,z:3}].forEach((function(e){var o=J.clone();o.position.set(e.x,e.y,e.z),z.add(o),(R=new n.Iw4(o)).clipAction(N.getClip()).play()}))}));var $,K,Q,ee=new n.eaF(new n.tcD(1,16),new n._4j({color:"white",roughness:.1,transparent:!0,opacity:.6}));ee.position.set(-5,.2,-2.6),ee.rotation.x=-Math.PI/2,ee.receiveShadow=!0,z.add(ee),(new i.B).load("./models/tex_ear.glb",(function(e){if(($=e.scene).castShadow=!0,$.receiveShadow=!0,$.scale.set(0,0,0),z.add($),Q=new n.Iw4($),e.animations&&e.animations.length>0){var o=e.animations[0];K=Q.clipAction(o)}}));var oe=new n.tBo,te=new n.I9Y,ne=new n.Pq0,ie=0,ae=!1;document.addEventListener("mousemove",(function(e){var o=new n.tBo,t=new n.I9Y;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,o.setFromCamera(t,A);var i=o.intersectObjects(z.children,!0);if(i.length>0)i[0].object}),!1);var re=new n.zD7;function se(e){te.x=e.clientX/x.clientWidth*2-1,te.y=-(e.clientY/x.clientHeight*2-1)}window.addEventListener("resize",(function(){A.left=-window.innerWidth/window.innerHeight,A.right=window.innerWidth/window.innerHeight,A.top=1,A.bottom=-1,A.updateProjectionMatrix(),S.setSize(window.innerWidth,window.innerHeight),S.render(z,A)})),x.addEventListener("mousedown",(function(e){ae=!0,se(e)})),x.addEventListener("mouseup",(function(){ae=!1})),x.addEventListener("mousemove",(function(e){ae&&se(e)})),x.addEventListener("touchstart",(function(e){ae=!0,se(e.touches[0])})),x.addEventListener("touchend",(function(){ae=!1})),x.addEventListener("touchmove",(function(e){ae&&se(e.touches[0])})),document.addEventListener("click",(function(e){te.x=e.clientX/window.innerWidth*2-1,te.y=-e.clientY/window.innerHeight*2+1,oe.setFromCamera(te,A),oe.intersectObject(Z.modelMesh).length>0?(m.Ay.to(Z.modelMesh.scale,{x:0,y:0,z:0,duration:.005,ease:"power2.inOut"}),m.Ay.to(F.scale,{x:.005,y:.005,z:.005,duration:.005}),m.Ay.to(Y.scale,{x:.005,y:.005,z:.005,duration:.005}),m.Ay.to(A.position,{duration:1,y:3}),H.play(),m.Ay.fromTo(G.position,{x:F.position.x,y:F.position.y-2,z:F.position.z},{x:F.position.x,y:F.position.y,z:F.position.z,duration:2,ease:"power2.out"})):(m.Ay.to(Z.modelMesh.scale,{x:.005,y:.005,z:.005,duration:.005,ease:"power2.inOut"}),m.Ay.to(F.scale,{x:0,y:0,z:0,duration:.005}),m.Ay.to(Y.scale,{x:0,y:0,z:0,duration:.005}),m.Ay.to(A.position,{duration:1,y:5}),m.Ay.to(G.position,{y:F.position.y-2,duration:1,ease:"power2.inOut"}),H.stop())}));window.addEventListener("keydown",(function(e){"Space"===e.code&&Z.playSecondAnimation()})),function e(){requestAnimationFrame(e);var o=re.getDelta();Z&&Z.update(o),C&&C.update(o),D&&D.update(o),X&&X.update(o),R&&R.update(o),Q&&Q.update(o),S.render(z,A)}(),function(){for(var e=0;e<5;e++){var o=q();z.add(o),B.push(o)}}(),function e(){var o=re.getDelta();Z.mixer&&Z.mixer.update(o),Z.modelMesh&&A.lookAt(Z.modelMesh.position),Z.modelMesh&&(ae&&(oe.setFromCamera(te,A),function(){var e,o=w(oe.intersectObjects(E));try{for(o.s();!(e=o.n()).done;){var t=e.value;"floor"===t.object.name&&(ne.x=t.point.x,ne.y=.3,ne.z=t.point.z,Z.modelMesh.lookAt(ne),Z.moving=!0,L.position.x=ne.x,L.position.z=ne.z);break}}catch(e){o.e(e)}finally{o.f()}}()),Z.moving?(ie=Math.atan2(ne.z-Z.modelMesh.position.z,ne.x-Z.modelMesh.position.x),Z.modelMesh.position.x+=.05*Math.cos(ie),Z.modelMesh.position.z+=.05*Math.sin(ie),A.position.x=j.x+Z.modelMesh.position.x,A.position.z=j.z+Z.modelMesh.position.z,Z.playWalk(),Math.abs(ne.x-Z.modelMesh.position.x)<.03&&Math.abs(ne.z-Z.modelMesh.position.z)<.03&&(Z.moving=!1),Math.abs(_.position.x-Z.modelMesh.position.x)<1.5&&Math.abs(_.position.z-Z.modelMesh.position.z)<1.5?V.visible||(V.visible=!0,_.material.color.set("skyblue"),m.Ay.to(Z.modelMesh.scale,{x:0,y:0,z:0,duration:.02,ease:"power2.inOut"}),m.Ay.to(A.position,{duration:2,y:3}),m.Ay.to(W.scale,{x:.005,y:.005,z:.005,duration:.02,ease:"power2.inOut"}),T.play()):V.visible?(V.visible=!1,_.material.color.set("skyblue"),m.Ay.to(W.scale,{x:0,y:0,z:0,duration:.02,ease:"power2.inOut"}),T.stop(),T.reset(),m.Ay.to(Z.modelMesh.scale,{x:.005,y:.005,z:.005,duration:.02,ease:"power2.inOut"}),m.Ay.to(A.position,{duration:1,y:5})):Math.abs(ee.position.x-Z.modelMesh.position.x)<1.5&&Math.abs(ee.position.z-Z.modelMesh.position.z)<1.5?(m.Ay.to(A.position,{duration:2,y:3}),m.Ay.to(Z.modelMesh.scale,{x:0,y:0,z:0,duration:.02,ease:"power2.inOut"}),m.Ay.to($.scale,{x:.005,y:.005,z:.005,duration:.02,ease:"power2.inOut"}),K.play()):Math.abs(ee.position.x-Z.modelMesh.position.x)>1.5&&Math.abs(ee.position.z-Z.modelMesh.position.z)>1.5&&(m.Ay.to($.scale,{x:0,y:0,z:0,duration:.02,ease:"power2.inOut"}),K.stop(),K.reset(),m.Ay.to(Z.modelMesh.scale,{x:.005,y:.005,z:.005,duration:.02,ease:"power2.inOut"}),m.Ay.to(A.position,{duration:1,y:5}))):Z.actions[0].stop(),W&&(W.position.copy(Z.modelMesh.position),W.quaternion.copy(Z.modelMesh.quaternion)),F&&(F.position.copy(Z.modelMesh.position),F.quaternion.copy(Z.modelMesh.quaternion)),Y&&(Y.position.copy(Z.modelMesh.position),Y.quaternion.copy(Z.modelMesh.quaternion)),$&&($.position.copy(Z.modelMesh.position),$.quaternion.copy(Z.modelMesh.quaternion))),S.render(z,A),S.setAnimationLoop(e)}()}},t={};function n(e){var i=t[e];if(void 0!==i)return i.exports;var a=t[e]={exports:{}};return o[e].call(a.exports,a,a.exports,n),a.exports}n.m=o,e=[],n.O=(o,t,i,a)=>{if(!t){var r=1/0;for(d=0;d<e.length;d++){for(var[t,i,a]=e[d],s=!0,l=0;l<t.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((e=>n.O[e](t[l])))?t.splice(l--,1):(s=!1,a<r&&(r=a));if(s){e.splice(d--,1);var c=i();void 0!==c&&(o=c)}}return o}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[t,i,a]},n.d=(e,o)=>{for(var t in o)n.o(o,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={792:0};n.O.j=o=>0===e[o];var o=(o,t)=>{var i,a,[r,s,l]=t,c=0;if(r.some((o=>0!==e[o]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var d=l(n)}for(o&&o(t);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},t=self.webpackChunkthreejs_study=self.webpackChunkthreejs_study||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var i=n.O(void 0,[412],(()=>n(3152)));i=n.O(i)})();